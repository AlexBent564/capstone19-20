<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>A quick demo of generating json object</title>
    <style>
        .formBox{
            padding: 0.5rem 2rem;
        }

    </style>
</head>
<body>
    <form>
        <h1> Input parameters (default value is red maple) </h1>
        <!-Maximum Tree Height->
        <div class="formBox">
            <label for="hmax">Maximum Tree Height (meters)</label><br>
            <input type="text" id="hmax" placeholder="Enter" value="27.5"/> m
        </div>

        <!-Slope at H versus r curve at r = 0 m->
        <div class="formBox">
            <label for="phih">Slope at H versus r curve at r = 0 m</label><br>
            <input type="text" id="phih" placeholder="Enter" value="263"/>
        </div>

        <!-Relative height at which trunk transitions from a paraboloid to a cone->
        <div class="formBox">
            <label for="eta">Relative height at which trunk transitions from a paraboloid to a cone</label><br>
            <input type="text" id="eta" placeholder="Enter" value="0.64"/>
        </div>

        <!-Maximum sapwood width->
        <div class="formBox">
            <label for="swmax">Maximum sapwood width</label><br>
            <input type="text" id="swmax" placeholder="Enter" value="0.1"/> m
        </div>

        <!-Proportionality between BT and BO->
        <div class="formBox">
            <label for="lamda">Proportionality between BT and BO</label><br>
            <input type="text" id="lamda" placeholder="Enter" value="0.95"/>
        </div>

        <!-Wood density at maximum radial growth->
        <div class="formBox">
            <label for="rhomax">Wood density at maximum radial growth （g dw m-3）</label><br>
            <input type="text" id="rhomax" placeholder="Enter" value="525000"/> g*dw*m-3
        </div>

        <!-Fine root area to leaf area ratio->
        <div class="formBox">
            <label for="f2">Fine root area to leaf area ratio</label><br>
            <input type="text" id="f2" placeholder="Enter" value="7000"/>
        </div>

        <!-Leaf area to xylem conducting area ratio->
        <div class="formBox">
            <label for="f1">Leaf area to xylem conducting area ratio</label><br>
            <input type="text" id="f1" placeholder="Enter" value="4"/>
        </div>

        <!-Maximum storage capacity of living sapwood cells->
        <div class="formBox">
            <label for="gammac">Maximum storage capacity of living sapwood cells(g gluc m-3)</label><br>
            <input type="text" id="gammac" placeholder="Enter" value="131000"/> g gluc m-3
        </div>

        <!-(Inverse) density of sapwood structural tissue->
        <div class="formBox">
            <label for="gammaw">(Inverse) density of sapwood structural tissue(m3g dw-1)</label><br>
            <input type="text" id="gammaw" placeholder="Enter" value="0.000000667"/> m3g dw-1
        </div>

        <!-Xylem conducting area to sapwood area ratio->
        <div class="formBox">
            <label for="gammax">Xylem conducting area to sapwood area ratio</label><br>
            <input type="text" id="gammax" placeholder="Enter" value="0.12"/>
        </div>

        <!-Construction costs of producing leaves->
        <div class="formBox">
            <label for="cgl">Construction costs of producing leaves (g gluc g dw-1)</label><br>
            <input type="text" id="cgl" placeholder="Enter" value="1.45"/> g gluc g dw-1
        </div>

        <!-Construction costs of producing fine roots->
        <div class="formBox">
            <label for="cgr">Construction costs of producing fine roots (g gluc g dw-1)</label><br>
            <input type="text" id="cgr" placeholder="Enter" value="1.25"/> g gluc g dw-1
        </div>

        <!-Construction costs of producing sapwood->
        <div class="formBox">
            <label for="cgw">Construction costs of producing sapwood (g gluc g dw-1)</label><br>
            <input type="text" id="cgw" placeholder="Enter" value="1.37"/> g gluc g dw-1
        </div>

        <!-Labile carbon storage capacity of leaves->
        <div class="formBox">
            <label for="deltal">Labile carbon storage capacity of leaves (g gluc g dw-1)</label><br>
            <input type="text" id="deltal" placeholder="Enter"value="0.095"/> g gluc g dw-1
        </div>

        <!-Labile carbon storage capacity of fine roots->
        <div class="formBox">
            <label for="deltar">Labile carbon storage capacity of fine roots (g gluc g dw-1)</label><br>
            <input type="text" id="deltar" placeholder="Enter" value="0.15"/> g gluc g dw-1
        </div>

        <!-Senescence rate of leaves->
        <div class="formBox">
            <label for="sl">Senescence rate of leaves (year-1)</label><br>
            <input type="text" id="sl" placeholder="Enter" value="1"/> year-1
        </div>

        <!-Specific leaf area->
        <div class="formBox">
            <label for="sla">Specific leaf area(m2g dw-1)</label><br>
            <input type="text" id="sla" placeholder="Enter" value="0.0141"/> m2g dw-1
        </div>

        <!- Senescence rate of fine roots->
        <div class="formBox">
            <label for="so">Senescence rate of fine roots(year-1)</label><br>
            <input type="text" id="so" placeholder="Enter" value="0.05"/> year-1
        </div>

        <!- Senescence rate of or coarse roots and branches->
        <div class="formBox">
            <label for="sr">Senescence rate of or coarse roots and branches(year-1)</label><br>
            <input type="text" id="sr" placeholder="Enter" value="1"/> year-1
        </div>

        <!- Average fine root radius->
        <div class="formBox">
            <label for="rr">Average fine root radius(m)</label><br>
            <input type="text" id="rr" placeholder="Enter" value="0.00015"/> m
        </div>

        <!- Tissue density of fine roots->
        <div class="formBox">
            <label for="rhor">Tissue density of fine roots(g dw m-3)</label><br>
            <input type="text" id="rhor" placeholder="Enter"value="160000"/> g dw m-3
        </div>

        <!- Maintenance respiration rate of leaves->
        <div class="formBox">
            <label for="rml">Maintenance respiration rate of leaves(g gluc g dw-1year-1)</label><br>
            <input type="text" id="rml" placeholder="Enter"value="2.5"/> g gluc g dw-1year-1
        </div>

        <!- Maintenance respiration rate of sapwood->
        <div class="formBox">
            <label for="rms">Maintenance respiration rate of sapwood(g gluc g dw-1year-1)</label><br>
            <input type="text" id="rms" placeholder="Enter" value="0.05"/> g gluc g dw-1year-1
        </div>

        <!- Maintenance respiration rate of fine root->
        <div class="formBox">
            <label for="rmr">Maintenance respiration rate of fine root(g gluc g dw-1year-1)</label><br>
            <input type="text" id="rmr" placeholder="Enter" value="1.5"/> g gluc g dw-1year-1
        </div>

        <!- Relative height at which trunk transitions from a neiloid to a paraboloid->
        <div class="formBox">
            <label for="etaB">Relative height at which trunk transitions from a neiloid to a paraboloid</label><br>
            <input type="text" id="etaB" placeholder="Enter" value="0.045"/>
        </div>

        <!- Light extinction coefficient->
        <div class="formBox">
            <label for="k">Light extinction coefficient</label><br>
            <input type="text" id="k" placeholder="Enter" value="0.7"/>
        </div>

        <!- Radiation-use efficiency->
        <div class="formBox">
            <label for="epsg">Radiation-use efficiency(g gluc MJ-1)</label><br>
            <input type="text" id="epsg" placeholder="Enter" value="6.75"/> g gluc MJ-1
        </div>

        <!- Maximum relative crown depth->
        <div class="formBox">
            <label for="M">Maximum relative crown depth</label><br>
            <input type="text" id="M" placeholder="Enter" value="0.95"/>
        </div>

        <!- Crown curvature parameter->
        <div class="formBox">
            <label for="alpha">Crown curvature parameter</label><br>
            <input type="text" id="alpha" placeholder="Enter"value="0.365"/>
        </div>

        <!- Maximum potential crown radius of a tree with diameter at breast height of 0 cm (i.e., for a tree that is exactly 1.37 m tall)->
        <div class="formBox">
            <label for="R0">Maximum potential crown radius of a tree with diameter at breast height of 0 cm (i.e., for a tree that is exactly 1.37 m tall)</label><br>
            <input type="text" id="R0" placeholder="Enter" value="1.909"/>
        </div>

        <!-Maximum potential crown radius of a tree with diameter at breast height of 40 cm->
        <div class="formBox">
            <label for="R40">Maximum potential crown radius of a tree with diameter at breast height of 40 cm</label><br>
            <input type="text" id="R40" placeholder="Enter" value="5.592"/>
        </div>

        <!-Submit button->
        <div class="formBox">
            <button id="submit" type="submit">Click to run</button>
            <button id="clear">clear</button>
        </div>

        <div id="msg">
            <pre></pre>
        </div>
    </form>
    <script>
 
            //initialize variables
            let uniqueTrees = [];
            
            //function that generate json object
            const generateJson = (ev)=>{
                
                uniqueTrees = [];

                ev.preventDefault();  //to stop the form submitting
                let uniqueTree = {
                    hmax: document.getElementById('hmax').value,
                    phih: document.getElementById('phih').value,
                    eta: document.getElementById('eta').value,
                    swmax: document.getElementById('swmax').value,
                    lamdas: document.getElementById('lamda').value,
                    lamdah: document.getElementById('lamda').value,
                    // (lambdas = lambdah = lambda).
                    rhomax: document.getElementById('rhomax').value,
                    //See detailed notes in picture below table;
                    // Kiona or Mike need to translate this to a quantitative rule.
                    rhomin:  document.getElementById('rhomax').value,
                    //Don't allow user to adjust, leave out from the parameter table.
                    f2:  document.getElementById('f2').value,
                    f1:  document.getElementById('f1').value,
                    gammac:  document.getElementById('gammac').value,
                    gammaw:  document.getElementById('gammaw').value,
                    gammax:  document.getElementById('gammax').value,
                    cgl:  document.getElementById('cgl').value,
                    cgr:  document.getElementById('cgr').value,
                    cgw:  document.getElementById('cgw').value,
                    deltal:  document.getElementById('deltal').value,
                    deltar:  document.getElementById('deltar').value,
                    sl:  document.getElementById('sl').value,
                    sla:  document.getElementById('sla').value,
                    sr:  document.getElementById('sr').value,
                    so:  document.getElementById('so').value,
                    rr:  document.getElementById('rr').value,
                    rhor:  document.getElementById('rhor').value,
                    rml:  document.getElementById('rml').value,
                    rms:  document.getElementById('rms').value,
                    rmr:  document.getElementById('rmr').value,
                    etaB:  document.getElementById('etaB').value,
                    k:  document.getElementById('k').value,
                    epsg:  document.getElementById('epsg').value,
                    M:  document.getElementById('M').value,
                    alpha:  document.getElementById('alpha').value,
                    R0:  document.getElementById('R0').value,
                    R40: document.getElementById('R40').value
                }

                uniqueTrees.push(uniqueTree);
                document.forms[0].reset(); // to clear the form for the next entries

                //for display purposes only
                console.warn('added' , {uniqueTrees} );
                let pre = document.querySelector('#msg pre');
                pre.textContent = '\n' + JSON.stringify(uniqueTrees, '\t', 2);

                //saving to localStorage
                localStorage.setItem('TreeInput', JSON.stringify(uniqueTrees) );
            }
           
            document.addEventListener('DOMContentLoaded', ()=>{
                document.getElementById('submit').addEventListener('click', generateJson);
            });



           //function that clear the form and json object
            const clear = (ev)=>{
                ev.preventDefault();  //to stop the form submitting

                document.forms[0].reset(); // to clear the form for the next entries

                uniqueTrees = [];//clear the json

                //for display purposes only
                console.warn('cleared' );
                let pre = document.querySelector('#msg pre');
                pre.textContent = '\n' + JSON.stringify(uniqueTrees, '\t', 2);
                
            }

            document.addEventListener('DOMContentLoaded', ()=>{
                document.getElementById('clear').addEventListener('click', clear);
            });



    </script>
</body>
</html>